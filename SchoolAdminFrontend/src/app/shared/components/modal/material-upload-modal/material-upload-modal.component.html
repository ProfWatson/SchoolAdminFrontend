<div class="modal-backdrop" (click)="close.emit()"></div>

<div class="modal">
  <h2>Upload Material</h2>

  <form [formGroup]="form">

    <!-- Title -->
    <label>Title:
    <input type="text" formControlName="title" />
    <div class="error" *ngIf="form.get('title')?.touched && form.get('title')?.invalid">
      *Title is required.
    </div>
    </label>

    <!-- Type -->
    <label>Type:
    <select formControlName="type">
      <option value="worksheet">Worksheet</option>
      <option value="notes">Notes</option>
      <option value="textbook">Textbook Section</option>
      <option value="resource">General Resource</option>
    </select>
    </label>

    <!-- Planned Item Link -->
    <label>Link to Lesson: (Optional)
    <select formControlName="plannedItemId">
      <option value="">— None —</option>
      <option *ngFor="let p of plannedItems" [value]="p.relatedId">
        {{ p.title }}
      </option>
    </select>
    </label>

    <!-- File Upload -->
    <label>Select File:
    <input type="file" (change)="onFileSelected($event)" multiple="false"/>

    <div class="error" *ngIf="form.get('file')?.errors?.['required'] && form.get('file')?.touched">
      *A file is required.
    </div>

    <div class="error" *ngIf="form.get('file')?.errors?.['multiple']">
      *Only one file may be uploaded.
    </div>
    </label>

    <!-- Buttons -->
    <div class="actions">
      <button type="button" class="cancel" (click)="close.emit()">Cancel</button>
      <button type="submit" (click)="upload()">
        Upload
      </button>
    </div>

  </form>
</div>
